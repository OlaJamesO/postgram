{"filter":false,"title":"App.js","tooltip":"/postagram/src/App.js","undoManager":{"mark":62,"position":62,"stack":[[{"start":{"row":0,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["import logo from './logo.svg';","import './App.css';","","function App() {","  return (","    <div className=\"App\">","      <header className=\"App-header\">","        <img src={logo} className=\"App-logo\" alt=\"logo\" />","        <p>","          Edit <code>src/App.js</code> and save to reload.","        </p>","        <a","          className=\"App-link\"","          href=\"https://reactjs.org\"","          target=\"_blank\"","          rel=\"noopener noreferrer\"","        >","          Learn React","        </a>","      </header>","    </div>","  );","}","","export default App;",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["// src/App.js","import React, { useState, useEffect } from 'react';","","// import API from Amplify library","import { API } from 'aws-amplify'","","// import query definition","import { listPosts } from './graphql/queries'","","export default function App() {","  const [posts, setPosts] = useState([])","  useEffect(() => {","    fetchPosts();","  }, []);","  async function fetchPosts() {","    try {","      const postData = await API.graphql({ query: listPosts });","      setPosts(postData.data.listPosts.items)","    } catch (err) {","      console.log({ err })","    }","  }","  return (","    <div>","      <h1>Hello World</h1>","      {","        posts.map(post => (","          <div key={post.id}>","            <h3>{post.name}</h3>","            <p>{post.location}</p>","          </div>","        ))","      }","    </div>","  )","}",""]}],[{"start":{"row":35,"column":1},"end":{"row":36,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":7,"column":45},"end":{"row":8,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":9,"column":0},"end":{"row":11,"column":42},"action":"insert","lines":["// src/App.js, import the withAuthenticator component and associated CSS ","import { withAuthenticator } from '@aws-amplify/ui-react'","import '@aws-amplify/ui-react/styles.css';"],"id":5}],[{"start":{"row":13,"column":0},"end":{"row":13,"column":15},"action":"remove","lines":["export default "],"id":6}],[{"start":{"row":39,"column":1},"end":{"row":40,"column":0},"action":"insert","lines":["",""],"id":7}],[{"start":{"row":40,"column":0},"end":{"row":40,"column":38},"action":"insert","lines":["export default withAuthenticator(App);"],"id":8}],[{"start":{"row":39,"column":1},"end":{"row":40,"column":0},"action":"insert","lines":["",""],"id":9}],[{"start":{"row":13,"column":13},"end":{"row":13,"column":30},"action":"insert","lines":["{ signOut, user }"],"id":10}],[{"start":{"row":33,"column":34},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":34,"column":0},"end":{"row":34,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":34,"column":12},"end":{"row":34,"column":56},"action":"insert","lines":[" <button onClick={signOut}>Sign out</button>"],"id":12}],[{"start":{"row":34,"column":12},"end":{"row":34,"column":13},"action":"remove","lines":[" "],"id":13}],[{"start":{"row":11,"column":42},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":12,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":13,"column":0},"end":{"row":14,"column":39},"action":"insert","lines":["//Add an import to use the API and Auth components from aws-amplify","import { API, Auth } from 'aws-amplify'"],"id":15}],[{"start":{"row":13,"column":0},"end":{"row":14,"column":39},"action":"remove","lines":["//Add an import to use the API and Auth components from aws-amplify","import { API, Auth } from 'aws-amplify'"],"id":31},{"start":{"row":12,"column":0},"end":{"row":13,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":33},"action":"remove","lines":["// import API from Amplify library","import { API } from 'aws-amplify'"],"id":32},{"start":{"row":3,"column":0},"end":{"row":4,"column":39},"action":"insert","lines":["//Add an import to use the API and Auth components from aws-amplify","import { API, Auth } from 'aws-amplify'"]}],[{"start":{"row":18,"column":9},"end":{"row":19,"column":0},"action":"insert","lines":["",""],"id":33},{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":19,"column":2},"end":{"row":20,"column":3},"action":"insert","lines":["checkUser(); // new function call","});"],"id":34}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":2},"action":"insert","lines":["  "],"id":35}],[{"start":{"row":18,"column":1},"end":{"row":18,"column":9},"action":"remove","lines":[" }, []);"],"id":36},{"start":{"row":18,"column":0},"end":{"row":18,"column":1},"action":"remove","lines":[" "]},{"start":{"row":17,"column":17},"end":{"row":18,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":18,"column":2},"end":{"row":18,"column":4},"action":"insert","lines":["  "],"id":37}],[{"start":{"row":16,"column":2},"end":{"row":19,"column":5},"action":"remove","lines":["useEffect(() => {","    fetchPosts();","    checkUser(); // new function call","  });"],"id":38},{"start":{"row":16,"column":2},"end":{"row":19,"column":3},"action":"insert","lines":["useEffect(() => {","  fetchPosts();","  checkUser(); // new function call","});"]}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "],"id":39}],[{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"insert","lines":["  "],"id":40},{"start":{"row":18,"column":0},"end":{"row":18,"column":2},"action":"insert","lines":["  "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":19,"column":2},"end":{"row":19,"column":4},"action":"remove","lines":["  "],"id":41}],[{"start":{"row":27,"column":3},"end":{"row":28,"column":0},"action":"insert","lines":["",""],"id":42},{"start":{"row":28,"column":0},"end":{"row":28,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":28,"column":2},"end":{"row":33,"column":1},"action":"insert","lines":["/define the checkUser function after the existing fetchPosts() function","async function checkUser() {","  const user = await Auth.currentAuthenticatedUser();","  console.log('user:', user);","  console.log('user attributes: ', user.attributes);","}"],"id":43}],[{"start":{"row":33,"column":1},"end":{"row":34,"column":0},"action":"insert","lines":["",""],"id":44}],[{"start":{"row":29,"column":0},"end":{"row":29,"column":2},"action":"insert","lines":["  "],"id":45},{"start":{"row":30,"column":0},"end":{"row":30,"column":2},"action":"insert","lines":["  "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":2},"action":"insert","lines":["  "]},{"start":{"row":32,"column":0},"end":{"row":32,"column":2},"action":"insert","lines":["  "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":28,"column":2},"end":{"row":28,"column":3},"action":"insert","lines":["/"],"id":46}],[{"start":{"row":18,"column":37},"end":{"row":19,"column":0},"action":"insert","lines":["",""],"id":47},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":38},"action":"remove","lines":["// src/App.js","import React, { useState, useEffect } from 'react';","","//Add an import to use the API and Auth components from aws-amplify","import { API, Auth } from 'aws-amplify'","","// import query definition","import { listPosts } from './graphql/queries'","","// src/App.js, import the withAuthenticator component and associated CSS ","import { withAuthenticator } from '@aws-amplify/ui-react'","import '@aws-amplify/ui-react/styles.css';","","","function App({ signOut, user }) {","  const [posts, setPosts] = useState([])","  useEffect(() => {","    fetchPosts();","    checkUser(); // new function call","    ","  });","  async function fetchPosts() {","    try {","      const postData = await API.graphql({ query: listPosts });","      setPosts(postData.data.listPosts.items)","    } catch (err) {","      console.log({ err })","    }","  }","  //define the checkUser function after the existing fetchPosts() function","  async function checkUser() {","    const user = await Auth.currentAuthenticatedUser();","    console.log('user:', user);","    console.log('user attributes: ', user.attributes);","  }","","  return (","    <div>","      <h1>Hello World</h1>","      {","        posts.map(post => (","          <div key={post.id}>","            <h3>{post.name}</h3>","            <p>{post.location}</p>","            <button onClick={signOut}>Sign out</button>","          </div>","        ))","      }","    </div>","  )","}","","export default withAuthenticator(App);"],"id":51},{"start":{"row":0,"column":0},"end":{"row":91,"column":0},"action":"insert","lines":["//App.js","","import React, { useState, useEffect } from \"react\";","import {","  HashRouter,","  Switch,","  Route","} from \"react-router-dom\";","import { withAuthenticator } from '@aws-amplify/ui-react';","import { css } from '@emotion/css';","import { API, Storage, Auth } from 'aws-amplify';","import '@aws-amplify/ui-react/styles.css';","import { listPosts } from './graphql/queries';","","import Posts from './Posts';","import Post from './Post';","import Header from './Header';","import CreatePost from './CreatePost';","import Button from './Button';","","function Router({user, signOut}) {","","  /* create a couple of pieces of initial state */","  const [showOverlay, updateOverlayVisibility] = useState(false);","  const [posts, updatePosts] = useState([]);","","  /* fetch posts when component loads */","  useEffect(() => {","      fetchPosts();","  }, []);","","  async function fetchPosts() {","","    /* query the API, ask for 100 items */","    let postData = await API.graphql({ query: listPosts, variables: { limit: 100 }});","    let postsArray = postData.data.listPosts.items;","","    /* map over the image keys in the posts array, get signed image URLs for each image */","    postsArray = await Promise.all(postsArray.map(async post => {","      const imageKey = await Storage.get(post.image);","      post.image = imageKey;","      return post;","    }));","","    /* update the posts array in the local state */","    setPostState(postsArray);","  }","  ","  async function setPostState(postsArray) {","    updatePosts(postsArray);","  }","","  return (","    <>","      <HashRouter>","          <div className={contentStyle}>","            <Header />","            <hr className={dividerStyle} />","            <Button title=\"New Post\" onClick={() => updateOverlayVisibility(true)} />","            <Switch>","              <Route exact path=\"/\" >","                <Posts posts={posts} />","              </Route>","              <Route path=\"/post/:id\" >","                <Post />","              </Route>","            </Switch>","          </div>","          <button onClick={signOut}>Sign out</button>","        </HashRouter>","        { showOverlay && (","          <CreatePost","            updateOverlayVisibility={updateOverlayVisibility}","            updatePosts={setPostState}","            posts={posts}","          />","        )}","    </>","  );","}","","const dividerStyle = css`","  margin-top: 15px;","`","","const contentStyle = css`","  min-height: calc(100vh - 45px);","  padding: 0px 40px;","`","","export default withAuthenticator(Router);",""]}],[{"start":{"row":50,"column":3},"end":{"row":51,"column":0},"action":"remove","lines":["",""],"id":52}],[{"start":{"row":50,"column":3},"end":{"row":51,"column":0},"action":"insert","lines":["",""],"id":53},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":0,"column":0},"end":{"row":91,"column":0},"action":"remove","lines":["//App.js","","import React, { useState, useEffect } from \"react\";","import {","  HashRouter,","  Switch,","  Route","} from \"react-router-dom\";","import { withAuthenticator } from '@aws-amplify/ui-react';","import { css } from '@emotion/css';","import { API, Storage, Auth } from 'aws-amplify';","import '@aws-amplify/ui-react/styles.css';","import { listPosts } from './graphql/queries';","","import Posts from './Posts';","import Post from './Post';","import Header from './Header';","import CreatePost from './CreatePost';","import Button from './Button';","","function Router({user, signOut}) {","","  /* create a couple of pieces of initial state */","  const [showOverlay, updateOverlayVisibility] = useState(false);","  const [posts, updatePosts] = useState([]);","","  /* fetch posts when component loads */","  useEffect(() => {","      fetchPosts();","  }, []);","","  async function fetchPosts() {","","    /* query the API, ask for 100 items */","    let postData = await API.graphql({ query: listPosts, variables: { limit: 100 }});","    let postsArray = postData.data.listPosts.items;","","    /* map over the image keys in the posts array, get signed image URLs for each image */","    postsArray = await Promise.all(postsArray.map(async post => {","      const imageKey = await Storage.get(post.image);","      post.image = imageKey;","      return post;","    }));","","    /* update the posts array in the local state */","    setPostState(postsArray);","  }","  ","  async function setPostState(postsArray) {","    updatePosts(postsArray);","  }","  ","  return (","    <>","      <HashRouter>","          <div className={contentStyle}>","            <Header />","            <hr className={dividerStyle} />","            <Button title=\"New Post\" onClick={() => updateOverlayVisibility(true)} />","            <Switch>","              <Route exact path=\"/\" >","                <Posts posts={posts} />","              </Route>","              <Route path=\"/post/:id\" >","                <Post />","              </Route>","            </Switch>","          </div>","          <button onClick={signOut}>Sign out</button>","        </HashRouter>","        { showOverlay && (","          <CreatePost","            updateOverlayVisibility={updateOverlayVisibility}","            updatePosts={setPostState}","            posts={posts}","          />","        )}","    </>","  );","}","","const dividerStyle = css`","  margin-top: 15px;","`","","const contentStyle = css`","  min-height: calc(100vh - 45px);","  padding: 0px 40px;","`","","export default withAuthenticator(Router);",""],"id":54},{"start":{"row":0,"column":0},"end":{"row":91,"column":0},"action":"insert","lines":["//App.js","","import React, { useState, useEffect } from \"react\";","import {","  HashRouter,","  Switch,","  Route","} from \"react-router-dom\";","import { withAuthenticator } from '@aws-amplify/ui-react';","import { css } from '@emotion/css';","import { API, Storage, Auth } from 'aws-amplify';","import '@aws-amplify/ui-react/styles.css';","import { listPosts } from './graphql/queries';","","import Posts from './Posts';","import Post from './Post';","import Header from './Header';","import CreatePost from './CreatePost';","import Button from './Button';","","function Router({user, signOut}) {","","  /* create a couple of pieces of initial state */","  const [showOverlay, updateOverlayVisibility] = useState(false);","  const [posts, updatePosts] = useState([]);","","  /* fetch posts when component loads */","  useEffect(() => {","      fetchPosts();","  }, []);","","  async function fetchPosts() {","","    /* query the API, ask for 100 items */","    let postData = await API.graphql({ query: listPosts, variables: { limit: 100 }});","    let postsArray = postData.data.listPosts.items;","","    /* map over the image keys in the posts array, get signed image URLs for each image */","    postsArray = await Promise.all(postsArray.map(async post => {","      const imageKey = await Storage.get(post.image);","      post.image = imageKey;","      return post;","    }));","","    /* update the posts array in the local state */","    setPostState(postsArray);","  }","  ","  async function setPostState(postsArray) {","    updatePosts(postsArray);","  }","","  return (","    <>","      <HashRouter>","          <div className={contentStyle}>","            <Header />","            <hr className={dividerStyle} />","            <Button title=\"New Post\" onClick={() => updateOverlayVisibility(true)} />","            <Switch>","              <Route exact path=\"/\" >","                <Posts posts={posts} />","              </Route>","              <Route path=\"/post/:id\" >","                <Post />","              </Route>","            </Switch>","          </div>","          <button onClick={signOut}>Sign out</button>","        </HashRouter>","        { showOverlay && (","          <CreatePost","            updateOverlayVisibility={updateOverlayVisibility}","            updatePosts={setPostState}","            posts={posts}","          />","        )}","    </>","  );","}","","const dividerStyle = css`","  margin-top: 15px;","`","","const contentStyle = css`","  min-height: calc(100vh - 45px);","  padding: 0px 40px;","`","","export default withAuthenticator(Router);",""]}],[{"start":{"row":29,"column":9},"end":{"row":30,"column":0},"action":"insert","lines":["",""],"id":55},{"start":{"row":30,"column":0},"end":{"row":30,"column":2},"action":"insert","lines":["  "]},{"start":{"row":30,"column":2},"end":{"row":31,"column":0},"action":"insert","lines":["",""]},{"start":{"row":31,"column":0},"end":{"row":31,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":31,"column":2},"end":{"row":32,"column":0},"action":"insert","lines":["const [myPosts, updateMyPosts] = useState([]);",""],"id":56}],[{"start":{"row":31,"column":2},"end":{"row":31,"column":4},"action":"insert","lines":["  "],"id":57}],[{"start":{"row":31,"column":4},"end":{"row":31,"column":50},"action":"remove","lines":["const [myPosts, updateMyPosts] = useState([]);"],"id":58}],[{"start":{"row":32,"column":0},"end":{"row":33,"column":0},"action":"remove","lines":["",""],"id":59},{"start":{"row":31,"column":4},"end":{"row":32,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":40,"column":53},"end":{"row":41,"column":0},"action":"insert","lines":["",""],"id":60},{"start":{"row":41,"column":0},"end":{"row":41,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":46},"action":"insert","lines":["const [myPosts, updateMyPosts] = useState([]);"],"id":63}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "],"id":64}],[{"start":{"row":50,"column":43},"end":{"row":51,"column":0},"action":"insert","lines":["",""],"id":65},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":51,"column":2},"end":{"row":51,"column":4},"action":"remove","lines":["  "],"id":66},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"remove","lines":["  "]},{"start":{"row":50,"column":43},"end":{"row":51,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":50,"column":2},"end":{"row":52,"column":3},"action":"remove","lines":["async function setPostState(postsArray) {","    updatePosts(postsArray);","  }"],"id":67},{"start":{"row":50,"column":2},"end":{"row":55,"column":1},"action":"insert","lines":["async function setPostState(postsArray) {","  const user = await Auth.currentAuthenticatedUser();","  const myPostData = postsArray.filter(p => p.owner === user.username);","  updateMyPosts(myPostData);","  updatePosts(postsArray);","}"]}],[{"start":{"row":70,"column":22},"end":{"row":71,"column":0},"action":"insert","lines":["",""],"id":68},{"start":{"row":71,"column":0},"end":{"row":71,"column":14},"action":"insert","lines":["              "]}],[{"start":{"row":71,"column":14},"end":{"row":73,"column":8},"action":"insert","lines":["<Route exact path=\"/myposts\" >","  <Posts posts={myPosts} />","</Route>"],"id":69}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":70}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":71}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":72}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":73}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":74}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "],"id":75}],[{"start":{"row":73,"column":0},"end":{"row":73,"column":2},"action":"insert","lines":["  "],"id":76}],[{"start":{"row":73,"column":2},"end":{"row":73,"column":4},"action":"insert","lines":["  "],"id":77}],[{"start":{"row":73,"column":4},"end":{"row":73,"column":6},"action":"insert","lines":["  "],"id":78}],[{"start":{"row":73,"column":6},"end":{"row":73,"column":8},"action":"insert","lines":["  "],"id":79}],[{"start":{"row":73,"column":8},"end":{"row":73,"column":10},"action":"insert","lines":["  "],"id":80}],[{"start":{"row":73,"column":10},"end":{"row":73,"column":12},"action":"insert","lines":["  "],"id":81}],[{"start":{"row":73,"column":12},"end":{"row":73,"column":14},"action":"insert","lines":["  "],"id":82}],[{"start":{"row":72,"column":14},"end":{"row":72,"column":16},"action":"insert","lines":["  "],"id":83}],[{"start":{"row":41,"column":4},"end":{"row":41,"column":6},"action":"remove","lines":["  "],"id":84},{"start":{"row":41,"column":2},"end":{"row":41,"column":4},"action":"remove","lines":["  "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":2},"action":"remove","lines":["  "]},{"start":{"row":40,"column":53},"end":{"row":41,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":201,"scrollleft":0,"selection":{"start":{"row":29,"column":9},"end":{"row":29,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":15,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1654038499621,"hash":"e2076d3056f280536cc408807ff8b8421df35b0d"}